class SpatialMenu extends HTMLElement {
  constructor() {
    super();

    //defines the template
    const temp = 
      `<template id="spatial-menu-shell">
        <style>
          :host{
            --primary-accent:#ffc800;
            --text-color:#3d3d3d;
            --subtle-ui-details:#eeeeee5e;
            --element-padding:1.5em;
            --base-color:#ffffff;
            --icon-4-text:1em;
            --perspective-value:450px;

            color: var(--text-color);
            background-color:var(--base-color);
          }

          nav{
            perspective-origin: top;
            perspective: var(--perspective-value);
          }

          .mainmenu{
            background-color: var(--base-color-a);
            display: grid;
            grid-template-columns: 1fr 1fr;
            transform: rotate3d(1, 0, 0, -89deg);
            transform-origin: top center;
            box-shadow:0px 5px 10px 2px var(--subtle-ui-details);
            padding: var(--element-padding);
            border-radius: .5em;
            width: 30em;
            transition: transform .5s;
          }

          .menu-open{
            transform: rotate3d(1, 0, 0, 0deg);
            transition: transform .5s;
          }

          .mainmenu-icon{
            width: 1.5em;
            height: 1.5em;
            margin:1em;
          }

          /* Animated hamburger header */
          .hamburger-icon{
            height: var(--icon-4-text);
          }

          .menu-header{
            cursor: pointer;
            margin: 10px 10px;
          }

          .menu-title{
            font-size: 1.4em;
            margin: 0px 0px 0px .1em;
          }
        </style>
        <nav>
          <header class="menu-header">
            <slot name="menu-icon"><svg class="hamburger-icon" viewBox="0 0 96.04 72.00"><rect x="0" y="63.9996" fill="#3D3D3D" fill-opacity="0.996078" stroke-linejoin="round" width="96.0416" height="8.00366"/><rect x="0" y="0.00012207" fill="#3D3D3D" fill-opacity="0.996078" stroke-linejoin="round" width="96.0416" height="8.00317"/><rect x="0" y="32.0001" fill="#3D3D3D" fill-opacity="0.996078" stroke-linejoin="round" width="96.0416" height="8.00317"/></svg></slot>
            <span class="menu-title"><slot name="menu-title">MENU</slot></span>
          </header>
          <div class="mainmenu">
            <slot name="menu-items">
              <svg class="mainmenu-icon" viewBox="0 0 213.56 232.04"><path fill="#3D3D3D" fill-opacity="1" d="M 4.00064,0L 196.032,0C 198.273,0 200.033,1.76025 200.033,4.00049L 200.033,33.0908C 207.861,35.7942 213.555,43.2463 213.555,52.0088L 213.555,152.985C 213.555,156.186 212.595,159.946 211.315,164.507C 210.034,169.148 208.354,174.349 206.514,179.229C 204.674,184.11 202.753,188.751 200.993,192.352L 200.033,194.197L 200.033,228.038C 200.033,230.278 198.273,232.038 196.032,232.038L 4.00064,232.038C 1.76028,232.038 -3.05176e-005,230.278 -3.05176e-005,228.038L -3.05176e-005,4.00049C -3.05176e-005,1.76025 1.76028,0 4.00064,0 Z M 192.032,224.039L 192.032,199.844C 190.835,199.5 190.389,198.772 190.031,198.355C 189.471,197.795 189.151,197.315 188.751,196.675C 187.951,195.475 187.231,194.034 186.351,192.274C 184.67,188.753 182.75,184.193 180.83,179.232C 178.989,174.351 177.149,169.15 175.869,164.589C 174.509,160.029 173.549,156.268 173.549,152.988L 173.549,52.011C 173.549,41.4805 181.699,32.8423 192.032,32.0647L 192.032,8.00391L 8.00143,8.00391L 8.00143,224.039L 192.032,224.039 Z M 193.552,40.009C 186.831,40.009 181.55,45.3696 181.55,52.011L 181.55,64.0127L 205.554,64.0127L 205.554,52.011C 205.554,45.3696 200.193,40.009 193.552,40.009 Z M 181.55,152.988C 181.55,153.967 182.03,156.705 182.902,160.028L 204.254,160.028C 205.078,156.763 205.554,154.029 205.554,152.988L 205.554,72.0139L 181.55,72.0139L 181.55,152.988 Z M 188.351,176.431C 190.111,181.152 192.032,185.633 193.552,188.833L 193.712,188.993C 193.712,188.913 193.792,188.913 193.792,188.753C 195.392,185.633 197.232,181.152 198.993,176.431C 200.022,173.671 201.024,170.801 201.919,168.029L 185.309,168.029C 186.232,170.779 187.278,173.632 188.351,176.431 Z M 36.006,64.012L 164.027,64.012L 164.027,72.0132L 36.006,72.0132L 36.006,64.012 Z M 36.006,96.0168L 164.027,96.0168L 164.027,104.018L 36.006,104.018L 36.006,96.0168 Z M 36.0059,128.022L 164.027,128.022L 164.027,136.023L 36.0059,136.023L 36.0059,128.022 Z M 36.0059,160.027L 164.027,160.027L 164.027,168.028L 36.0059,168.028L 36.0059,160.027 Z "/></svg>
              <svg class="mainmenu-icon" viewBox="0 0 209.38 235.14"><path fill="#3D3D3D" fill-opacity="1" d="M104.967 0c29.682 0 54.244 23.922 54.244 53.604 0 29.122-24.562 53.044-54.244 53.044-30.162 0-54.724-23.922-54.724-53.044C50.243 23.922 74.805 0 104.967 0zm.001 8.005c-25.922 0-46.724 20.322-46.724 45.604 0 24.642 20.802 45.044 46.724 45.044 25.361 0 46.243-20.402 46.243-45.044 0-25.282-20.882-45.604-46.243-45.604zm0 101.928c17.041 0 33.122 3.921 47.363 10.721l-3.52 7.201c-13.121-6.321-28.002-9.921-43.843-9.921-53.124 0-95.208 39.203-96.808 88.807 32.483 10.4 65.205 20.401 96.808 20.401 31.682 0 63.844-10.001 96.327-20.481-.32-9.521-2.081-18.642-5.121-27.203l7.521-2.72a97.604 97.604 0 0 1 5.68 32.883c0 1.68-1.12 3.28-2.72 3.76-33.522 10.801-67.365 21.762-101.687 21.762-34.323 0-68.726-10.961-102.168-21.762-1.68-.48-2.8-2.08-2.8-3.76 0-55.445 46.803-99.688 104.968-99.688zm88.566 68.805v-.48c0 4.8-3.92 8.721-8.721 8.721h-7.52c-4.8 0-8.721-3.921-8.721-8.721v.48l-4.705-36.769c-4.504-4.46-7.296-10.651-7.296-17.475 0-13.441 10.961-24.482 24.482-24.482 13.521 0 24.482 11.041 24.482 24.482 0 6.842-2.807 13.048-7.331 17.511l-4.67 36.733zm-17.041-1.04c.08.24.08.4.08.56 0 .4.24.72.72.72h7.52c.48 0 .72-.32.72-.72 0-.16 0-.32.08-.56l3.83-30.128a24.291 24.291 0 0 1-8.39 1.485c-2.932 0-5.743-.519-8.349-1.47l3.789 30.113zm4.56-69.686c-9.2 0-16.481 7.361-16.481 16.482 0 9.2 7.281 16.561 16.481 16.561 9.121 0 16.481-7.361 16.481-16.561 0-9.121-7.36-16.482-16.481-16.482zm-6.4 4.801c1.28 0 2.32 1.04 2.32 2.4 0 1.28-1.04 2.32-2.32 2.32-1.36 0-2.4-1.04-2.4-2.32 0-1.36 1.04-2.4 2.4-2.4zm-4.081 6.88c1.36 0 2.401 1.04 2.401 2.4 0 1.28-1.041 2.32-2.401 2.32-1.28 0-2.4-1.04-2.4-2.32 0-1.36 1.12-2.4 2.4-2.4zm1.921 8c1.28 0 2.4 1.12 2.4 2.4 0 1.36-1.12 2.4-2.4 2.4-1.281 0-2.401-1.04-2.401-2.4 0-1.28 1.12-2.4 2.401-2.4zm8.56-1.12c1.36 0 2.4 1.12 2.4 2.4 0 1.28-1.04 2.4-2.4 2.4-1.28 0-2.32-1.12-2.32-2.4 0-1.28 1.04-2.4 2.32-2.4zm-2.88 7.04c1.36 0 2.4 1.04 2.4 2.4 0 1.28-1.04 2.32-2.4 2.32-1.28 0-2.32-1.04-2.32-2.32 0-1.36 1.04-2.4 2.32-2.4zm3.36-22.882c1.36 0 2.4 1.12 2.4 2.4 0 1.36-1.04 2.4-2.4 2.4-1.28 0-2.4-1.04-2.4-2.4 0-1.28 1.12-2.4 2.4-2.4zm-3.28 9.28c1.36 0 2.4 1.04 2.4 2.4 0 1.281-1.04 2.321-2.4 2.321-1.28 0-2.32-1.04-2.32-2.321 0-1.36 1.04-2.4 2.32-2.4zm10.161-6.961c1.28 0 2.32 1.04 2.32 2.32 0 1.361-1.04 2.401-2.32 2.401-1.361 0-2.401-1.04-2.401-2.401 0-1.28 1.04-2.32 2.401-2.32zm4.96 6.8c1.28 0 2.32 1.04 2.32 2.401 0 1.28-1.04 2.32-2.32 2.32-1.36 0-2.4-1.04-2.4-2.32 0-1.361 1.04-2.401 2.4-2.401zm-7.281 13.361c1.36 0 2.401 1.04 2.401 2.32 0 1.36-1.041 2.4-2.401 2.4-1.28 0-2.4-1.04-2.4-2.4 0-1.28 1.12-2.32 2.4-2.32zm4.641-6.161c1.36 0 2.4 1.04 2.4 2.401 0 1.28-1.04 2.4-2.4 2.4-1.28 0-2.32-1.12-2.32-2.4 0-1.361 1.04-2.401 2.32-2.401zm-4.961-6.081c1.36 0 2.401 1.04 2.401 2.321 0 1.36-1.041 2.4-2.401 2.4-1.28 0-2.32-1.04-2.32-2.4a2.322 2.322 0 0 1 2.32-2.321z"/></svg>
              <svg class="mainmenu-icon" viewBox="0 0 258.67 222.37"><path fill="#3D3D3D" fill-opacity="1" d="M 211.624,202.103C 213.224,203.623 213.224,206.183 211.624,207.703L 198.183,221.225C 196.582,222.745 194.102,222.745 192.502,221.225L 152.335,180.98L 140.016,180.98L 140.016,204.423C 140.016,206.583 138.256,208.424 136.016,208.424L 122.654,208.424C 120.494,208.424 118.654,206.583 118.654,204.423L 118.654,180.98L 106.413,180.98L 66.1677,221.226C 64.5676,222.746 62.0872,222.746 60.4871,221.226L 47.0456,207.704C 45.5254,206.184 45.5254,203.624 47.0456,202.104L 68.1687,180.98L 12.4814,180.98C 10.2411,180.98 8.48096,179.14 8.48096,176.98L 8.48096,30.3232L 4.00049,30.3232C 1.76019,30.3232 0,28.563 0,26.3228L 0,4.00024C 0,1.76001 1.76019,0 4.00049,0L 254.669,0C 256.909,0 258.669,1.76001 258.669,4.00024L 258.669,26.3228C 258.669,28.563 256.909,30.3232 254.669,30.3232L 250.189,30.3232L 250.189,176.98C 250.189,179.14 248.428,180.98 246.188,180.98L 190.502,180.98L 211.624,202.103 Z M 195.383,212.747L 203.143,204.906L 179.221,180.983L 163.619,180.983L 195.383,212.747 Z M 55.5272,204.906L 63.368,212.747L 95.0664,180.983L 79.4506,180.983L 55.5272,204.906 Z M 126.655,200.426L 132.016,200.426L 132.016,180.983L 126.655,180.983L 126.655,200.426 Z M 16.4825,31.2061L 16.4825,172.982L 242.188,172.982L 242.188,31.2061L 16.4825,31.2061 Z M 106.813,44.7271C 132.976,44.7271 154.338,66.0894 154.338,92.3325C 154.338,94.4927 152.578,96.333 150.338,96.333L 106.813,96.333C 104.573,96.333 102.812,94.4927 102.812,92.3325L 102.812,48.7275C 102.812,46.4873 104.573,44.7271 106.813,44.7271 Z M 110.813,53.1282L 110.813,88.3323L 145.937,88.3323C 144.097,69.6099 129.455,54.9683 110.813,53.1282 Z M 95.0513,56.4883C 97.2116,56.4883 99.0518,58.2483 99.0518,60.4885L 99.0518,100.093L 138.576,100.093C 140.817,100.093 142.577,101.854 142.577,104.094C 142.577,130.256 121.214,151.619 95.0513,151.619C 68.8083,151.619 47.4459,130.256 47.4459,104.094C 47.4459,77.8506 68.8083,56.4883 95.0513,56.4883 Z M 91.0508,64.8892C 71.0486,66.8892 55.4468,83.5313 55.4468,104.094C 55.4468,125.936 73.1288,143.618 95.0513,143.618C 115.534,143.618 132.176,128.016 134.176,108.094L 95.0513,108.094C 92.811,108.094 91.0508,106.254 91.0508,104.094L 91.0508,64.8892 Z M 168.339,55.8479L 218.105,55.8479L 218.105,63.8486L 168.339,63.8486L 168.339,55.8479 Z M 168.339,80.0103L 218.105,80.0103L 218.105,88.011L 168.339,88.011L 168.339,80.0103 Z M 168.339,104.173L 218.105,104.173L 218.105,112.173L 168.339,112.173L 168.339,104.173 Z M 168.339,128.335L 218.105,128.335L 218.105,136.336L 168.339,136.336L 168.339,128.335 Z M 8.00098,8.00098L 8.00098,22.3225L 250.669,22.3225L 250.669,8.00098L 8.00098,8.00098 Z "/></svg>
              <svg class="mainmenu-icon" viewBox="0 0 220.15 235.99"><path fill="#3D3D3D" fill-opacity="1" d="M 63.2992,40.6508L 106.832,40.6508L 106.832,48.6534L 63.2992,48.6534C 32.7299,48.6534 8.00232,73.381 8.00232,103.95L 8.00232,172.691C 8.00232,203.261 32.7299,227.988 63.2992,227.988L 132.04,227.988C 162.609,227.988 187.337,203.261 187.337,172.691L 187.337,107.551L 195.339,107.551L 195.339,172.691C 195.339,207.582 166.931,235.99 132.04,235.99L 63.2992,235.99C 28.4086,235.99 -0.00012207,207.582 -0.00012207,172.691L -0.00012207,103.95C -0.00012207,69.0597 28.4086,40.6508 63.2992,40.6508 Z M 167.971,0.00012207C 196.7,0.00012207 220.147,23.3673 220.147,52.0961C 220.147,80.8246 196.7,104.272 167.971,104.272C 139.243,104.272 115.876,80.8246 115.876,52.0961C 115.876,23.3673 139.243,0.00012207 167.971,0.00012207 Z M 167.971,8.00281C 143.564,8.00281 123.879,27.6886 123.879,52.0961C 123.879,76.5033 143.564,96.2694 167.971,96.2694C 192.379,96.2694 212.145,76.5033 212.145,52.0961C 212.145,27.6886 192.379,8.00281 167.971,8.00281 Z M 60.739,142.523C 76.5839,142.523 89.548,155.487 89.548,171.332C 89.548,187.097 76.5839,200.061 60.739,200.061C 44.9742,200.061 32.0104,187.097 32.0104,171.332C 32.0104,155.487 44.9742,142.523 60.739,142.523 Z M 60.739,150.526C 49.2957,150.526 40.0128,159.808 40.0128,171.332C 40.0128,182.776 49.2957,192.058 60.739,192.058C 72.2626,192.058 81.5455,182.776 81.5455,171.332C 81.5455,159.808 72.2626,150.526 60.739,150.526 Z M 133.241,121.317C 134.761,121.236 136.122,122.036 136.922,123.317L 159.249,162.049C 160.769,164.69 158.849,168.051 155.808,168.051L 111.074,168.051C 108.033,168.051 106.113,164.69 107.633,162.049L 129.96,123.317C 130.68,122.197 131.88,121.397 133.241,121.317 Z M 133.401,133.32L 118.036,160.048L 148.846,160.048L 133.401,133.32 Z M 68.0209,72.7413L 102.992,72.7413C 105.152,72.7413 106.993,74.5819 106.993,76.7426L 106.993,111.713C 106.993,113.954 105.152,115.714 102.992,115.714L 68.0209,115.714C 65.7804,115.714 64.0198,113.954 64.0198,111.713L 64.0198,76.7426C 64.0198,74.5819 65.7804,72.7413 68.0209,72.7413 Z M 72.0222,80.744L 72.0222,107.712L 98.9905,107.712L 98.9905,80.744L 72.0222,80.744 Z M 152.607,25.5265C 153.887,25.6066 155.007,26.2469 155.727,27.2072L 181.175,62.0978L 181.495,27.1271L 189.498,27.2072L 189.098,74.2616C 189.018,78.1027 184.136,79.7032 181.895,76.5822L 156.448,41.8517L 156.448,77.8624L 148.445,77.8624L 148.445,29.5277C 148.445,27.2872 150.366,25.4467 152.607,25.5265 Z "/></svg>
            </slot>
          </div>

        </nav>
      </template>`;

      /****
       * Adding the template to the shadow DOM and appending it
       ****/
      const shadowRoot = this.attachShadow({mode:'open'});
      shadowRoot.innerHTML = temp;

      const templateContent = shadowRoot.getElementById('spatial-menu-shell').content;
      shadowRoot.appendChild(templateContent);

      /****
       * JS to handle actions inside the component
       ****/
      let toggleMainMenu = function(){
        let my_menu = shadowRoot.querySelector('.mainmenu');
        my_menu.classList.toggle('menu-open');
      };
      
      //get reference to header of menu (hamburger icon and title) and add event
      let hamb = shadowRoot.querySelector('.menu-header');
      hamb.addEventListener('click', toggleMainMenu);
      
  }
}

customElements.define('spatial-menu', SpatialMenu);